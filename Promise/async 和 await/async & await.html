<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>async & await</title>
</head>
<body>
<script>
    /*
     * async 函数
     *  函数的返回值为 promise 对象
     *  promise 对象的结果由 async 函数执行的返回值决定
     */
    async function main() { // 和 then() 返回值规则很像
        // 1. 如果返回值是一个非 promise 类型的数据
        // return 521;
        // 2. 如果返回的是一个 Promise 对象
        // return new Promise((resolve, reject) => {
        //     resolve('OK');
        //     // reject('Error');
        // });
        // 抛出异常
        throw "Oh NO";
    }

    // let res = main();
    // console.log(res);

    /*
     * await
     *  await 右侧的表达式一般为 promise 对象, 但也可以是其他的值
     *  如果表达式是 promise 对象, await 返回的是 promise 成功的值
     *  如果表达式是其他值, 直接将此值作为 await 的返回值
     */
    async function main_() {
        let p = new Promise((resolve, reject) => {
            // resolve('OK');
            reject('Error');
        });
        // 1. 右侧为 promise 的情况
        // let res = await p;
        // console.log(res);
        // 2. 右侧为其他类型的数据
        // let res2 = await 20;
        // console.log(res2);
        // 3. 如果 promise 是失败的状态
        try {
            let res3 = await p;
        } catch (e) {
            console.log(e);
        }
    }
    main_();
</script>
</body>
</html>